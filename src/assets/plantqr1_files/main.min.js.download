var acc=document.getElementsByClassName("accordion-heading");for(i=0;i<acc.length;i++)acc[i].addEventListener("click",function(){this.classList.toggle("active"),this.nextElementSibling.classList.toggle("active")});function showAlert(e){document.getElementById("copy_alert");var t=document.createElement("div");t.classList="alert-top-right widget-alert",t.innerHTML=e,t.id="copy_alert",document.body.appendChild(t),setTimeout(function(){document.getElementById("copy_alert").remove()},5e3)}function dataURLtoBlob(e){for(var e=e.split(","),t=e[0].match(/:(.*?);/)[1],a=atob(e[1]),o=a.length,r=new Uint8Array(o);o--;)r[o]=a.charCodeAt(o);return new Blob([r],{type:t})}let copyToClipboard=async()=>{var e=await svg2png(qr.dataUrl).then(e=>dataURLtoBlob(e));try{navigator.clipboard.write([new ClipboardItem({"image/png":e})]),showAlert("Image has been copied to your clipboard.")}catch(e){console.error(e)}},nextActiveTab="",maxStringSize=20,utmParamKeys=["utm_source","utm_medium","utm_campaign"];function getTemplateData(e){switch(parseInt(e)){case 1:return{dataPattern:"square",logoBackground:!1,logoImage:"",backgroundColor:"#ffffff",eyeBallShape:"square",eyeFrameShape:"square",eyeFrameColor:"#000000",eyeBallColor:"#000000",isVcard:!1,gradientType:"none",colorLight:"#ffffff",colorDark:"#000000",margin:50,text:null,template:1};case 2:return{dataPattern:"circle",logoBackground:!0,logoImage:"https://polo-server.beaconstac.com/static/images/polo/facebook.svg",backgroundColor:"#ffffff",eyeBallShape:"rounded",eyeFrameShape:"rounded",eyeFrameColor:"#1877f2",eyeBallColor:"#1877f2",isVcard:!1,gradientType:"none",colorDark:"#000000",colorLight:"#ffffff",margin:50,text:null,template:2};case 3:return{dataPattern:"smooth-round",logoBackground:!0,logoImage:"https://polo-server.beaconstac.com/static/images/polo/rocket.svg",backgroundColor:"#ffffff",eyeBallShape:"rounded",eyeFrameShape:"rounded",eyeFrameColor:"#E46767",eyeBallColor:"#E46767",isVcard:!1,gradientType:"none",colorDark:"#0CA3F4",colorLight:"#ffffff",margin:50,text:null,template:3};case 4:return{dataPattern:"circle",logoBackground:!0,logoImage:"https://polo-server.beaconstac.com/static/images/polo/cart.svg",backgroundColor:"#212121",eyeBallShape:"rounded",eyeFrameShape:"rounded",eyeFrameColor:"#ff7171",eyeBallColor:"#ff7171",isVcard:!1,gradientType:"none",colorDark:"#ff7171",colorLight:"#ffffff",margin:50,text:null,template:4};case 5:return{dataPattern:"smooth-round",logoBackground:!0,logoImage:"https://polo-server.beaconstac.com/static/images/polo/i.svg",backgroundColor:"#ffffff",eyeBallShape:"rounded",eyeFrameShape:"rounded",eyeFrameColor:"#000000",eyeBallColor:"#000000",isVcard:!1,gradientType:"none",colorDark:"#000000",colorLight:"#ffffff",margin:50,text:null,template:5};case 6:return{dataPattern:"circle",logoBackground:!0,logoImage:"https://polo-server.beaconstac.com/static/images/polo/star.svg",backgroundColor:"#ffffff",eyeBallShape:"rounded",eyeFrameShape:"rounded",eyeFrameColor:"#000000",eyeBallColor:"#000000",isVcard:!1,gradientType:"none",colorDark:"#000000",colorLight:"#ffffff",margin:50,text:null,template:6};case 7:return{dataPattern:"thin-square",logoBackground:!0,logoImage:"https://polo-server.beaconstac.com/static/images/polo/player.svg",backgroundColor:"#ffffff",eyeBallShape:"square",eyeFrameShape:"square",eyeFrameColor:"#000000",eyeBallColor:"#000000",isVcard:!1,gradientType:"none",colorDark:"#000000",colorLight:"#ffffff",margin:50,text:null,template:7};case 8:return{dataPattern:"smooth-sharp",logoBackground:!0,logoImage:"https://polo-server.beaconstac.com/static/images/polo/youtube.svg",backgroundColor:"#ffffff",eyeBallShape:"circle",eyeFrameShape:"rounded",eyeFrameColor:"#000000",eyeBallColor:"#000000",isVcard:!1,gradientType:"none",colorDark:"#000000",colorLight:"#ffffff",margin:50,text:null,template:8};case 9:return{dataPattern:"smooth-round",frame:"none",logoBackground:!1,logoImage:"",frameText:"",backgroundColor:"#000",eyeBallShape:"circle",eyeFrameShape:"rounded",eyeFrameColor:"#ffcd4e",eyeBallColor:"#ffcd4e",isVcard:!1,gradientType:"none",colorLight:"#ffffff",colorDark:"#ffa200",margin:50,text:null,frameColor:"",template:9};case 10:return{dataPattern:"circle",frame:"none",logoBackground:!1,logoImage:"",frameText:"",backgroundColor:"#ffffff",eyeBallShape:"rounded",eyeFrameShape:"rounded",eyeFrameColor:"#000",eyeBallColor:"#000",isVcard:!1,gradientType:"none",colorLight:"#ffffff",colorDark:"#000",margin:50,text:null,frameColor:"",template:10};case 11:return{dataPattern:"smooth-round",logoBackground:!1,logoImage:"",backgroundColor:"#ffffff",eyeBallShape:"rounded",eyeFrameShape:"rounded",eyeFrameColor:"#512da8",eyeBallColor:"#512da8",isVcard:!1,gradientType:"none",colorLight:"#ffffff",colorDark:"#7b1fa2",margin:50,text:null,template:11};case 12:return{dataPattern:"smooth-round",logoBackground:!1,logoImage:"",backgroundColor:"#ffffff",eyeBallShape:"rounded",eyeFrameShape:"rounded",eyeFrameColor:"#388e3c",eyeBallColor:"#388e3c",isVcard:!1,gradientType:"none",colorLight:"#ffffff",colorDark:"#00796b",margin:50,text:null,template:12}}}let inputTypeRegex={url:{regex:new RegExp("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{2,63}\\b([-a-zA-Z0-9()!@:%_\\+.~#?,&\\/\\/=]*)?(\\/.*)?$","i"),helpertext:"For e.g.- https://example.com/",errorMsg:"Please enter a valid URL"},social_url:{regex:new RegExp("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{2,63}\\b([-a-zA-Z0-9()!@:%_\\+.~#?,&\\/\\/=]*)?(\\/.*)?$","i"),helpertext:"For e.g.- https://example.com/",errorMsg:"Please enter a valid URL"},campaign_url:{regex:new RegExp("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{2,63}\\b([-a-zA-Z0-9()!@:%_\\+.~#?,&\\/\\/=]*)?(\\/.*)?$","i"),errorMsg:"Must be a valid URL"},email:{regex:/[A-Za-z0-9._%+'-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}/,errorMsg:"Please enter a valid email address"},phone:{regex:/^[+]?[(]?([0-9]{1,4})?[)]?[-\s.0-9]{6,15}$/,errorMsg:"Please enter a valid phone number"},homephone:{regex:/^[+]?[(]?([0-9]{1,4})?[)]?[-\s.0-9]{6,15}$/,errorMsg:"Please enter a valid phone number"},color:{regex:/^#[0-9A-F]{6}$/i,errorMsg:"Enter a valid hex code"},medium:{regex:/^(?!\s*$).+/,errorMsg:"This field is required"},source:{regex:/^(?!\s*$).+/,errorMsg:"This field is required"}};class QRCode{constructor(){this.dataUrl=null,this.logo="",this.dataPattern="square",this.frame="none",this.logoBackground=!1,this.frameText="",this.backgroundColor="#ffffff",this.eyeBallShape="square",this.eyeFrameShape="square",this.eyeFrameColor="#000000",this.eyeBallColor="#000000",this.isVcard=!1,this.gradientType="none",this.colorLight="#ffffff",this.colorDark="#000000",this.margin=1,this.text="",this.frameColor="#000000",this.template=1,this.type="url",this.downloadFileName="Untitled 1",this.previewDivId="generated-qr-code-img",this.maskedDots=!1}isContrastLow=()=>Math.min(Math.abs(hexToHSL(customizationQr.backgroundColor)-hexToHSL(customizationQr.colorDark)),Math.abs(hexToHSL(customizationQr.backgroundColor)-hexToHSL(customizationQr.eyeFrameColor)))<40;changeQrProperty=(e,t)=>{let a;a=e?e.dataset:t;for(var[o,r]of Object.entries(a))!e||"color"!=e.type&&"color"!=e.dataset.type||(r=e.value),this[o]=r;this.generateQR()};changeQRStyle=e=>{this.dataPattern=e.dataset.qrPattern,this.eyeBallShape=e.dataset.qrEyeShape,this.eyeFrameShape=e.dataset.qrEyeFrameShape,this.generateQR()};generateQR=async()=>{isEmptyObject(qrData.data)?document.getElementById("generated-qr-code-img").innerHTML=document.getElementById("template"+qr.template).innerHTML:await new QRCodeGenerator.QRCodeBuilder({text:decodeURIComponent(qrData.getData())||"default",size:1024,margin:this.margin,dotScale:1,backgroundColor:this.backgroundColor,logoBackground:this.logoBackground,frameText:this.frameText,colorDark:this.colorDark,colorLight:this.colorLight,logoImage:this.logo,dataPattern:this.dataPattern,frameStyle:this.frame,eyeBallShape:this.eyeBallShape,eyeFrameShape:this.eyeFrameShape,eyeFrameColor:this.eyeFrameColor,eyeBallColor:this.eyeBallColor,isVCard:this.isVcard,gradientType:this.gradientType,frameColor:this.frameColor,useCanvas:!0,logoImage:this.logoImage||"",imageServerRequestHeaders:{}}).build("png").then(e=>{this.dataUrl=e.svg}).then(()=>{this.updateQRPreview(),this.isContrastLow()?document.getElementById("contrastWarning").classList.remove("d-none"):document.getElementById("contrastWarning").classList.add("d-none")})};selectTemplate=e=>{e=getTemplateData(e);this.changeQrProperty(null,e)};updateQRPreview=()=>{document.querySelector("#"+this.previewDivId).innerHTML=this.dataUrl};downloadQR=async()=>{var e=document.createElement("a");e.href=await svg2png(this.dataUrl),navigator.clipboard.writeText(await svg2png(this.dataUrl)),e.download=document.getElementById("fileName").value||"Untiled 1.png",e.click()}}class QrData{constructor(){this.type="url",this.social_type="",this.data={},this.isValid=null}setData=(e,t,a="")=>{e&&(this.type=e),t&&(this.data=t),a&&(this.social_type=a)};changeQrDataProperty=e=>{for(var[t,a]of Object.entries(e))this.data[t]=a};getData=()=>{switch(this.type){case"url":return encodeURI(this.data.url);case"social-url":return encodeURI(this.data.social_url);case"contact":return"BEGIN:VCARD\nVERSION:3.0\nN:"+(this.data.lname||"")+";"+(this.data.fname||"")+";;"+(this.data.prefix||"")+"\nFN:"+(this.data.fname||"")+" "+(this.data.lname||"")+"\n"+(this.data.prefix?"PREFIX:"+this.data.prefix+"\n":"")+(this.data.title?"TITLE:"+this.data.title+"\n":"")+(this.data.org?"ORG:"+this.data.org+"\n":"")+(this.data.phone?"TEL;other:"+this.data.phone+"\n":"")+(this.data.homephone?"TEL;mobile:"+this.data.homephone+"\n":"")+(this.data.fax?"FAX:"+this.data.fax+"\n":"")+(this.data.email?"EMAIL:"+this.data.email+"\n":"")+(this.data.address?"ADR:"+this.data.address+"\n":"")+"ADR:;;"+(this.data.street||"")+";"+(this.data.city||"")+";"+(this.data.region||"")+";"+(this.data.zip||"")+"\nEND:VCARD";case"txt":return this.data.textMsg;case"sms":return encodeURI("smsto:"+this.data.phone+":")+this.data.smsMsg;case"email":return encodeURI("mailto:"+this.data.email+"?subject="+this.data.subject+"&body="+this.data.emailMsg);case"phone":return encodeURI("tel:"+this.data.phone);default:return""}};changeQrType=e=>{this.type=e.dataset.qrType}}function isDynamicTemplate(){return 1<qr.template&&qr.template<9}function addListenerToInputFields(){document.querySelectorAll(".input").forEach(t=>{let a=t.dataset.inputType;addErrorMsgDivOnInput(t);let o;t.addEventListener("keyup",function(e){clearTimeout(o);checkErrorOnInput(t)?(qrData.isValid=!0,isDynamicTemplate()||enableUtilityBtns()):(disbleUtilityBtns(),qrData.isValid=!1);e={[a]:e.target.value};qrData.changeQrDataProperty(e),addOrRemoveLoaderAnimation("generated-qr-code-img",!0),o=setTimeout(()=>{qr.generateQR(),addOrRemoveLoaderAnimation(qr.previewDivId,!1)},500),showConvertToDynamicBanner()})})}function addOrRemoveLoaderAnimation(e,t=!1){t?document.getElementById(e).classList.add("loader"):document.getElementById(e).classList.remove("loader")}let addErrorMsgDivOnInput=e=>{var t,a=e.dataset.inputType;document.getElementById("input_helper_text_"+a)||((t=document.createElement("sub")).innerHTML="",t.className="input_helper_text",t.id="input_helper_text_"+a,e.after(t))},checkErrorOnInput=e=>{var t=e.dataset.inputType,a=document.getElementById("input_helper_text_"+t);return!(!e.value||inputTypeRegex[t]&&(""===e.value?(a.innerHTML=inputTypeRegex[t].helpertext||"",a.classList.remove("error"),e.classList.remove("error"),1):inputTypeRegex[t]&&!inputTypeRegex[t].regex.test(e.value)?(e.classList.add("error"),a.classList.add("error"),a.innerHTML=inputTypeRegex[t].errorMsg||"",1):(e.classList.remove("error"),a.classList.remove("error"),"social_url"===t?(errorMsgForDifferentSocialHandles={facebook:"Try something like https://facebook.com/yourname",linkedin:"Try something like https://linkedin.com/yourname",instagram:"Try something like https://instagram.com/yourname",forms:"Try something like https://forms.gle/yourform",spotify:"Try something like https://spotify.com/yourname",youtube:"Try something like https://youtube.com/yourname","google-review":"Try something like https://maps.app.goo.gl/yourbusiness",whatsapp:"Try something like https://chat.whatsapp.com/yourname",default:"For e.g.- https://example.com/"},a.innerHTML=errorMsgForDifferentSocialHandles[qrData.social_type]):a.innerHTML=inputTypeRegex[t].helpertext||"",0)))},showCustomizeModal=()=>{document.getElementById("customizeModal").classList.add("active"),copyQrObject(customizationQr,qr),syncQRColorsOnModal()},convertToDynamicOrRedirect=(window.onclick=function(a){document.querySelectorAll(".modal").forEach(e=>{a.target==e&&e.classList.contains("active")&&(e.classList.remove("active"),"analyticModal"==e.id)&&checkboxStateUpdate("track-scan-input-toggle",!1)}),document.querySelectorAll("[data-dismiss-target]").forEach(e=>{var t=document.getElementById(e.dataset.dismissTarget);a.target==e&&t.classList.contains("active")&&(t.classList.remove("active"),"analyticModal"==t.id)&&checkboxStateUpdate("track-scan-input-toggle",!1)}),document.querySelectorAll(".dropdown_content").forEach(e=>{a.target.classList.contains("dropdown-btn")||"copy_dropdown"==a.target.id?e.classList.add("active"):(!a.target.classList.contains("dropdown_option")&&e.classList.contains("active")&&e.classList.remove("active"),convertToDynamicOrRedirect(a))})},e=>{e=e.target.dataset.convertToDynamic;e&&redirectToSignIn("customise"===e?"customise":e)}),showModalQRCG=e=>(document.getElementById(e).classList.add("active"),!1),dismissModal=e=>(document.getElementById(e).classList.remove("active"),!1),discardQrCodeData=(document.querySelectorAll("[data-target-modal]").forEach(e=>{let t=e.dataset.targetModal;e.addEventListener("click",function(e){showModalQRCG(t)})}),()=>{qrData.data={},qr.generateQR(),document.getElementById("discardModal").classList.remove("active"),document.getElementById("blue_info_banner_parent_preview").classList.add("d-none"),changeActiveTab(nextActiveTab),disbleUtilityBtns()}),showDiscardModal=async()=>(document.getElementById("discardModal").classList.add("active"),!1),showDownloadModal=async()=>(document.getElementById("downloadModal").classList.add("active"),!1),showSaveDownloadModal=async()=>(document.getElementById("saveDownloadModal").classList.add("active"),!1),disableDownloadModal=async()=>(document.getElementById("downloadModal").classList.remove("active"),!1),removeDownloadModalAndShowSaveDownloadModal=async()=>(disableDownloadModal(),showSaveDownloadModal(),!1),showAnalyticModal=async()=>(document.getElementById("analyticModal").classList.add("active"),!1),downloadButtonElement=(document.getElementById("analytic-signup").addEventListener("click",function(e){redirectToSignIn(this.dataset.signupSource)}),document.getElementById("downloadBtn")),updateQRTypeIfSocial=(document.querySelectorAll("[data-tab-target]").forEach(e=>{e.addEventListener("click",async()=>{isEmptyObject(qrData.data)?(changeActiveTab(e),disbleUtilityBtns(),addListenerForRedirect()):(await showDiscardModal(),nextActiveTab=e),downloadButtonElement.setAttribute("data-gaevent",e.dataset.gadownloadevent)})}),()=>{var e=document.querySelector('[data-tab-target="tab-content-social-url"]');e&&e.classList.contains("active")&&qrData.setData("social-url",{},e.dataset.socialType)}),changeActiveTab=(e,t)=>{removeActiveClassFromAllOptions("[data-tab-target]");var a=document.querySelector("#"+e.dataset.tabTarget),o=e.dataset.socialType||"",a=(document.getElementById("widget_input_tab_content").innerHTML=a.innerHTML,e.classList.add("active"),e.dataset.tabTarget.replace("tab-content-",""));qrData.setData(a,{},o),qr.generateQR(),addListenerToInputFields()},removeActiveClassFromAllOptions=e=>{document.querySelectorAll(e).forEach(e=>{e.classList.remove("active")})};function showDynamicPrompt(e){qr.template=e.dataset.templateid||1,qr.selectTemplate(e.dataset.templateid),("true"===e.dataset.isdynamic?(document.getElementsByClassName("widget_output_preview_image")[0].classList.add("disabled"),disbleUtilityBtns):(document.getElementsByClassName("widget_output_preview_image")[0].classList.remove("disabled"),qrData.isValid?enableUtilityBtns:disbleUtilityBtns))(),document.getElementById("generated-qr-code-img").innerHTML=e.innerHTML}function isEmptyObject(t){return Object.keys(t).every(function(e){return""===t[e]||null===t[e]})}document.getElementById("input_margin_slider").addEventListener("change",function(e){customizationQr.changeQrProperty(null,{margin:parseInt(e.target.value)})});let carouselScroll=(e,t)=>{let a;switch(e){case"left":a={x:-100,y:0};break;case"right":a={x:100,y:0};break;case"up":a={x:0,y:-100};break;case"down":a={x:0,y:100}}document.getElementById(t).scrollBy(a.x,a.y)};async function svg2png(e,t=1e3,a=1e3){let o=new Image;o.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e),await new Promise((e,t)=>{o.onload=e,o.onerror=t});e=document.createElement("canvas");return[e.width,e.height]=[t,a],e.getContext("2d").drawImage(o,0,0,t,a),e.toDataURL("image/png")}document.querySelectorAll("[data-selection-options]").forEach(t=>{t.addEventListener("click",function(e){removeActiveClassFromAllOptions(t.dataset.selectionOptions)})}),document.addEventListener("DOMContentLoaded",e=>{addListenerToInputFields(),setCarouselHeight(),updateQRTypeIfSocial()});let qr=new QRCode,qrData=new QrData,customizationQr=new QRCode;function copyQrObject(e,t){e.eyeBallShape=t.eyeBallShape,e.eyeBallColor=t.eyeBallColor,e.eyeFrameShape=t.eyeFrameShape,e.eyeFrameColor=t.eyeFrameColor,e.dataPattern=t.dataPattern,e.colorDark=t.colorDark,e.backgroundColor=t.backgroundColor,e.margin=t.margin,e.generateQR()}function setCarouselHeight(){var e=document.getElementById("generated-qr-code-img").offsetHeight;document.getElementById("templates_carousel").style.height=e-50+"px"}function showConvertToDynamicBanner(){var e=["sms","txt","contact"],t=JSON.stringify(qrData.data).length,a=document.getElementById("blue_info_banner_parent_social_url");("url"==qrData.type||"social-url"==qrData.type)&&30<JSON.stringify(qrData.data).length?(document.getElementById("blue_info_banner_parent_url").classList.remove("d-none"),a&&a.classList.remove("d-none")):(document.getElementById("blue_info_banner_parent_url").classList.add("d-none"),a&&a.classList.add("d-none")),0<=e.indexOf(qrData.type)&&30<t||qrData.type==e[2]&&1<t?document.getElementById("blue_info_banner_parent_preview").classList.remove("d-none"):document.getElementById("blue_info_banner_parent_preview").classList.add("d-none")}function generateUrlFromCampaign(){var e=document.forms.campaign_builder_form.url,t=document.forms.campaign_builder_form.medium,a=document.forms.campaign_builder_form.source,o=document.forms.campaign_builder_form.campaign;e.value&&inputTypeRegex.url.regex.test(e.value)||(e.classList.add("error"),document.getElementById("input_helper_text_campaign_url").innerHTML="Must be a valid URL",document.getElementById("input_helper_text_campaign_url").classList.add("error")),t.value||(t.classList.add("error"),document.getElementById("input_helper_text_medium").innerHTML="This field is required",document.getElementById("input_helper_text_medium").classList.add("error")),a.value||(a.classList.add("error"),document.getElementById("input_helper_text_source").innerHTML="This field is required",document.getElementById("input_helper_text_source").classList.add("error")),inputTypeRegex.campaign_url.regex.test(e.value)&&t.value&&a.value&&((e=new URL(e.value)).searchParams.set("utm_medium",t.value),e.searchParams.set("utm_source",a.value),o.value&&e.searchParams.set("utm_campaign",o.value),document.getElementById("input_url").value=e,document.getElementById("campaignModal").classList.remove("active"),t={url:e},qrData.changeQrDataProperty(t),qr.generateQR())}function getLastParam(e,t){return e.searchParams.getAll(t).at(-1)||""}function fillCampaignBuilderFromUrl(){var e=new URL(document.getElementById("input_url").value);if(e){var t,a=getLastParam(e,"utm_source"),o=getLastParam(e,"utm_medium"),r=getLastParam(e,"utm_campaign");for(t of utmParamKeys)e.searchParams.delete(t);document.getElementById("campaignUrl").value=e.href,document.getElementById("campaignMedium").value=a,document.getElementById("campaignSource").value=o,document.getElementById("campaignCampaign").value=r}}function enableUtilityBtns(){document.getElementById("widget_output_utility_btn").classList.add("active")}function disbleUtilityBtns(){document.getElementById("widget_output_utility_btn").classList.remove("active")}function hexToHSL(e){let t=0,a=0,o=0,r=(4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],o="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],o="0x"+e[5]+e[6]),t/=255,a/=255,o/=255,Math.min(t,a,o)),n=Math.max(t,a,o),l=n-r,i=0,s;return i=0==l?0:n==t?(a-o)/l%6:n==a?(o-t)/l+2:(t-a)/l+4,(i=Math.round(60*i))<0&&(i+=360),s=(n+r)/2,(100*(0==l?0:l/(1-Math.abs(2*s-1)))).toFixed(1),+(100*s).toFixed(1)}function mapCodeContent(e){let t={};switch(e){case"url":t={custom_url:{url:qrData.data.url||""},content_type:1};break;case"social-url":t={social_links:{social_link_url:qrData.data.social_url||"",social_link_type:qrData.social_type||"",title:""},content_type:27};break;case"email":t={email:{email:qrData.data.email||"",subject:qrData.data.subject||"",body:qrData.data.emailMsg||""},content_type:17};break;case"sms":t={phone_sms:{phone:qrData.data.phone||"",body:qrData.data.smsMsg||""},content_type:16};break;case"phone":t={phone_call:{phone:qrData.data.phone||""},content_type:15};break;case"txt":t={free_text:{content:qrData.data.textMsg||""},content_type:24};break;case"contact":t={vcard_plus:{prefix:qrData.data.prefix||"",first_name:qrData.data.fname||"",last_name:qrData.data.lname||"",designation:qrData.data.title||"",company:qrData.data.org||"",address_v2:"",phone_v2:[{label:"Phone",value:qrData.data.phone||"",valid:"valid"},{label:"Mobile Phone",value:qrData.data.homephone||"",valid:"valid"},{label:"Fax",value:qrData.data.fax||"",valid:"valid"}],email_v2:[{label:"",value:qrData.data.email||"",valid:"valid"}],website_v2:[{label:"",value:qrData.data.url||"",valid:"valid"},{label:"",value:"www.mkbhd.com",valid:"valid"}],street:qrData.data.street||"",city:qrData.data.city||"",region:qrData.data.region||"",zip:qrData.data.postcode||"",country:qrData.data.country||"",layout:"6",customizations:{font_style:"Open Sans",secondary_color:"#000000",title_font_size:24,user_info_color:"#000000",background_color:"#1F70C1"}},content_type:7};break;case"pdf":t={pdf:{files:[],name:""},content_type:13};break;case"multiurl":t={multi_url:{title:"Your title here",items:[]},content_type:25};break;case"app":t={app_links:{android_url:"",iphone_url:"",fallback_url:""},content_type:5};break;default:t={custom_url:{url:""},content_type:1}}return t}function convertToDynamic(e="qr-widget",t){var a=dashboardURL,o=mapCodeContent(qrData.type),t=t||qr,r=Math.ceil((t.margin-40)/90*2)+1,r={attributes:{backgroundColor:t.backgroundColor,color:t.color,colorDark:t.colorDark,colorLight:t.colorLight,gradient:t.gradient,backgroundImage:t.backgroundImage,logoImage:t.logoImage,logoBackground:t.logoBackground,logoMargin:t.logoMargin,frameStyle:t.frameStyle,frameColor:t.frameColor,frameText:"",frameTextColor:t.frameTextColor,dataPattern:t.dataPattern,eyeBallShape:t.eyeBallShape,eyeFrameShape:t.eyeFrameShape,eyeBallColor:t.eyeBallColor,eyeFrameColor:t.eyeFrameColor,dotScale:t.dotScale,margin:r,rectangular:t.rectangular,isVCard:t.isVCard},campaign:o},t=JSON.stringify(r),o=new URL(a);return o.pathname="/convert-to-dynamic",o.searchParams.set("sns",t),"qrType"==e&&(e=qrData.type),o.searchParams.set("signup_source",e),o.searchParams.set("userLandingPage",userData.user_epc),o.toString()}function redirectToSignIn(e){e=convertToDynamic(e,"customise"===e?customizationQr:void 0);window.location.href=e}function convertHexToSix(e){return"#"+(e=3===(e=e.replace("#","")).length?e.split("").map(function(e){return e+e}).join(""):e)}function addListenerForRedirect(){document.querySelectorAll("[data-convert-to-dynamic]").forEach(e=>{let t=e.dataset.convertToDynamic||"qr-widget";e.addEventListener("click",function(e){window.location.href=convertToDynamic(t)})})}customizationQr.previewDivId="generated-qr-code-img-customize";let qrCustomiseGenerateTimeout;function syncQRColorsOnModal(){document.getElementById("input_background").value=qr.backgroundColor,document.getElementById("input_squares").value=qr.eyeFrameColor,document.getElementById("input_pixels").value=qr.colorDark,document.getElementById("input-value-background").value=qr.backgroundColor,document.getElementById("input-value-squares").value=qr.eyeFrameColor,document.getElementById("input-value-pixels").value=qr.colorDark}document.querySelectorAll("[data-input-target]").forEach(t=>{t.addEventListener("input",function(e){e=convertHexToSix(e.target.value);clearTimeout(qrCustomiseGenerateTimeout),inputTypeRegex.color.regex.test(e)?(qrCustomiseGenerateTimeout=setTimeout(()=>{customizationQr.changeQrProperty(t)},500),document.getElementById(t.dataset.inputTarget).value=e,document.getElementById("colorError").classList.add("d-none")):document.getElementById("colorError").classList.remove("d-none")})});var i,acc=document.getElementsByClassName("accordion");for(i=0;i<acc.length;i++)acc[i].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"});function showCopyOptions(){window.innerWidth<=700&&showModalQRCG("copyModal")}let upgradeModalSignUpSource="qr-widget";function handleSignupSourceForUpgradeModal(e){upgradeModalSignUpSource=e}function upgradeModalRedirect(){window.location.href=`${dashboardURL}/qrcodes?from=pricing?signup_source=${upgradeModalSignUpSource}&userLandingPage=`+userData.user_epc}function getCookie(e){for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var o=t[a].trim().split("=");if(o[0]===e)return o[1]}return null}document.addEventListener("DOMContentLoaded",function(){let t=0,a=setInterval(function(){var e=parseInt(getCookie("trackingToggle"))+1;e||4!=t||setCookieQRCG("trackingToggle",0,14),e&&((e={1:{name:"track_scans_toggle",position:"left",value:0},2:{name:"update_later_toggle",position:"left",value:1},3:{name:"gps_tracking_toggle",position:"left",value:2},4:{name:"track_scans_toggle_right_position",position:"right",value:3},5:{name:"update_later_toggle_right_position",position:"right",value:4},6:{name:"gps_tracking_toggle_right_position",position:"right",value:5}}[e])&&(updateTrackingToggleExperiment(e.name,e.position,e.value),window.gtag("event","page-view_"+e.name,{})),clearInterval(a)),t+=1},500);setTimeout(function(){clearInterval(a)},1e4)});let checkboxStateUpdate=(e,t)=>{document.querySelectorAll("."+e).forEach(e=>{e.checked=t})};function updateTrackingToggleExperiment(e,t,a){var o=document.querySelector(".track-toggle-left"),r=document.querySelector(".track-toggle-right"),n=document.getElementById("analytic-signup"),l=document.querySelectorAll(".modal-title"),i=document.getElementById("scan-tracking"),s=document.querySelectorAll(".track-scan-experiment");n.setAttribute("data-signup-source",e),s.forEach(e=>e.classList.remove("active")),s[a]&&s[a].classList.add("active"),l.forEach(e=>e.classList.remove("active")),l[a%3].classList.add("active"),"left"===t?(o.classList.add("active"),r.classList.remove("active")):(o.classList.remove("active"),r.classList.add("active")),"left"!==t&&i.classList.replace("start-0","end-0")}function setCookieQRCG(e,t,a){var o=new Date;o.setDate(o.getDate()+a),document.cookie=e+"="+t+"; expires="+o.toUTCString()+"; path=/; Secure; SameSite=Strict"}